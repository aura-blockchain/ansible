---
# Global variables for AURA testnet infrastructure
# AURA Blockchain - Ansible group_vars
#
# IMPORTANT: Chain-level constants are defined in group_vars/chain.yml
# This file maps those canonical values to role-specific variable names.
# =============================================================================

# =============================================================================
# Chain Configuration Mappings
# These map canonical chain.yml values to role-specific variable names
# DO NOT hardcode values here - reference chain.yml variables instead
# =============================================================================
node_chain_name: "{{ chain_name }}"
node_chain_id: "{{ chain_id }}"
node_daemon_name: "{{ daemon_name }}"
node_daemon_user: "{{ daemon_user }}"
node_bech_prefix: "{{ chain_bech32_prefix }}"
node_staking_denom: "{{ chain_staking_denom }}"
node_denom_coefficient: "{{ chain_denom_coefficient }}"

# =============================================================================
# Version Mappings (reference chain.yml)
# =============================================================================
node_go_version: "{{ go_version }}"
node_cosmovisor_version: "{{ cosmovisor_version }}"
tenderduty_version: "{{ tenderduty_version }}"
cosmos_exporter_version: "{{ cosmos_exporter_version }}"
node_exporter_version: "{{ node_exporter_version }}"
monitoring_prometheus_version: "{{ prometheus_version }}"
monitoring_alertmanager_version: "{{ alertmanager_version }}"
monitoring_loki_version: "{{ loki_version }}"

# =============================================================================
# Directory Variables
# =============================================================================
node_backup_dir: "/home/{{ node_daemon_user }}/aura-backups"
snapshot_dir: "/home/{{ node_daemon_user }}/aura-snapshots"
node_log_dir: "/var/log/aura"
node_go_install_path: /usr/local/go

# =============================================================================
# Network URLs (reference chain.yml)
# =============================================================================
node_genesis_url: "{{ genesis_url }}"
node_peers_url: "{{ peers_url }}"

# =============================================================================
# Monitoring Ports (reference chain.yml ports object)
# =============================================================================
node_exporter_port: "{{ ports.node_exporter }}"
monitoring_prometheus_port: "{{ ports.prometheus }}"
monitoring_alertmanager_port: "{{ ports.alertmanager }}"
cosmos_exporter_port: "{{ ports.cosmos_exporter }}"
tenderduty_port: "{{ ports.tenderduty }}"
monitoring_grafana_port: "{{ ports.grafana }}"

# =============================================================================
# Security (used by common role)
# =============================================================================
common_ufw_enabled: true
common_ssh_port: 22
common_vpn_network: "10.10.0.0/24"

# SSH hardening
common_ssh_permit_root: "no"
common_ssh_password_auth: "no"

# Firewall defaults
common_ufw_default_incoming: deny
common_ufw_default_outgoing: allow

# =============================================================================
# Tenderduty Alerting Configuration
# =============================================================================
# Slack alerting (enabled by default for AURA)
tenderduty_slack_enabled: true
tenderduty_slack_webhook: "{{ vault_slack_webhook | default('') }}"

# Discord alerting (disabled)
tenderduty_discord_enabled: false
tenderduty_discord_webhook: "{{ vault_discord_webhook | default('') }}"

# Telegram alerting (disabled)
tenderduty_telegram_enabled: false
tenderduty_telegram_token: "{{ vault_telegram_bot_token | default('') }}"
tenderduty_telegram_chat_id: "{{ vault_telegram_chat_id | default('') }}"

# =============================================================================
# System Configuration (used by common role)
# =============================================================================
common_timezone: UTC
common_locale: en_US.UTF-8

# Common packages
common_packages:
  - curl
  - wget
  - vim
  - htop
  - jq
  - git
  - make
  - build-essential
  - unzip
  - tmux
  - fail2ban
  - ufw
  - logrotate
  - lz4

# =============================================================================
# Prometheus Configuration (monitoring role)
# =============================================================================
monitoring_prometheus_scrape_interval: 15s

# =============================================================================
# Nginx Configuration
# =============================================================================
nginx_worker_processes: auto
nginx_worker_connections: 4096

# =============================================================================
# Cosmovisor Configuration (node role)
# =============================================================================
node_cosmovisor_allow_download: false
node_cosmovisor_restart_after_upgrade: true

# =============================================================================
# Backup Settings
# =============================================================================
snapshot_retention_days: 7

# =============================================================================
# Maintenance
# =============================================================================
security_maintenance_reminder_day: 1
security_update_check: weekly

# =============================================================================
# VPN Network for monitoring access (reference chain.yml)
# =============================================================================
node_exporter_vpn_network: "{{ vpn_network }}"
cosmos_exporter_vpn_network: "{{ vpn_network }}"
tenderduty_vpn_network: "{{ vpn_network }}"

# =============================================================================
# Node configuration
# =============================================================================
node_configure_firewall: true
node_service_enabled: true
node_service_state: started
