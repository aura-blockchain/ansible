// Unattended-Upgrades configuration for AURA blockchain servers
// Generated by Ansible - do not edit directly

// Automatically upgrade packages from these origins
Unattended-Upgrade::Allowed-Origins {
    "${distro_id}:${distro_codename}";
    "${distro_id}:${distro_codename}-security";
    "${distro_id}ESMApps:${distro_codename}-apps-security";
    "${distro_id}ESM:${distro_codename}-infra-security";
    "${distro_id}:${distro_codename}-updates";
};

// Package blacklist - packages that should NOT be automatically upgraded
Unattended-Upgrade::Package-Blacklist {
    // Prevent automatic kernel upgrades (may require reboot planning)
    // "linux-image-*";
    // "linux-headers-*";
};

// Automatically reboot WITHOUT confirmation if required
Unattended-Upgrade::Automatic-Reboot "{{ 'true' if security_unattended_upgrades_auto_reboot else 'false' }}";

// Automatic reboot time (if enabled)
Unattended-Upgrade::Automatic-Reboot-Time "{{ security_unattended_upgrades_auto_reboot_time }}";

{% if security_unattended_upgrades_mail %}
// Send email notifications
Unattended-Upgrade::Mail "{{ security_unattended_upgrades_mail }}";
{% if security_unattended_upgrades_mail_only_on_error %}
Unattended-Upgrade::MailReport "only-on-error";
{% else %}
Unattended-Upgrade::MailReport "on-change";
{% endif %}
{% endif %}

// Remove unused automatically installed kernel-related packages
Unattended-Upgrade::Remove-Unused-Kernel-Packages "{{ 'true' if security_unattended_upgrades_remove_unused_kernel else 'false' }}";

// Remove new unused dependencies after upgrade
Unattended-Upgrade::Remove-New-Unused-Dependencies "{{ 'true' if security_unattended_upgrades_remove_unused_deps else 'false' }}";

// Remove unused dependencies
Unattended-Upgrade::Remove-Unused-Dependencies "{{ 'true' if security_unattended_upgrades_remove_unused_deps else 'false' }}";

// Enable logging to syslog
Unattended-Upgrade::SyslogEnable "true";
Unattended-Upgrade::SyslogFacility "daemon";

// Verbose logging for debugging
// Unattended-Upgrade::Verbose "true";
// Unattended-Upgrade::Debug "true";
