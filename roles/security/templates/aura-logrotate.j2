# Logrotate configuration for AURA blockchain
# Generated by Ansible - do not edit directly

# AURA node logs (via journald)
/var/log/journal/*/{{ security_aura_service_name }}.journal {
    daily
    rotate {{ security_logrotate_rotate_count }}
{% if security_logrotate_compress %}
    compress
{% endif %}
{% if security_logrotate_delaycompress %}
    delaycompress
{% endif %}
    missingok
    notifempty
    sharedscripts
    postrotate
        /usr/bin/systemctl kill --kill-who=main --signal=SIGUSR2 systemd-journald.service 2>/dev/null || true
    endscript
}

# AURA application logs (if using file logging)
{{ security_aura_log_dir }}/*.log {
    daily
    rotate {{ security_logrotate_rotate_count }}
{% if security_logrotate_compress %}
    compress
{% endif %}
{% if security_logrotate_delaycompress %}
    delaycompress
{% endif %}
    missingok
    notifempty
    create 0640 ubuntu ubuntu
    sharedscripts
}

# AURA snapshot logs
/var/log/aura-snapshot.log {
    daily
    rotate {{ security_logrotate_rotate_count }}
{% if security_logrotate_compress %}
    compress
{% endif %}
{% if security_logrotate_delaycompress %}
    delaycompress
{% endif %}
    missingok
    notifempty
    create 0640 ubuntu ubuntu
}

# Cosmos exporter logs
/var/log/aura-cosmos-exporter.log {
    daily
    rotate {{ security_logrotate_rotate_count }}
{% if security_logrotate_compress %}
    compress
{% endif %}
{% if security_logrotate_delaycompress %}
    delaycompress
{% endif %}
    missingok
    notifempty
    create 0640 cosmos_exporter cosmos_exporter
}

# Tenderduty logs
/var/log/aura-tenderduty.log {
    daily
    rotate {{ security_logrotate_rotate_count }}
{% if security_logrotate_compress %}
    compress
{% endif %}
{% if security_logrotate_delaycompress %}
    delaycompress
{% endif %}
    missingok
    notifempty
    create 0640 tenderduty tenderduty
}
